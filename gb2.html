<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GrowBucks â€“ Kid View (gb2)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="gb-kid">
  <header class="topbar">
    <div class="topbar-left">
      <div class="logo">A</div>
      <div>
        <p class="topbar-title">Hi Ava ğŸ‘‹</p>
        <p class="topbar-sub">Kid View (gb2.html)</p>
      </div>
    </div>
    <div class="topbar-right">
      <a href="gb1.html" class="nav-btn">Parent</a>
      <a href="gb2.html" class="nav-btn active">Kid</a>
    </div>
  </header>

  <main>
    <section class="card">
      <h2 class="card-title">Your wallet (demo)</h2>
      <p class="muted">This is just a fake balance to make it feel real.</p>
      <div class="balance" id="kid-balance">$8.00</div>
      <p class="status-note" id="balance-note">Complete chores to earn more GrowBucks.</p>
    </section>

    <section class="card">
      <h2 class="card-title">Todayâ€™s chores</h2>
      <p class="muted">Tap â€œğŸ‰ I finished!â€ when you complete a chore.</p>
      <ul id="chore-list" class="chore-list">
        <!-- items injected by JS -->
      </ul>
    </section>
  </main>

  <script>
    const kid = { name: "Ava", balance: 8.0 };

    let chores = [
      { id: "c1", name: "Dishes after dinner", payout: 2.0, frequency: "Daily", status: "assigned" },
      { id: "c2", name: "Clean bedroom", payout: 4.0, frequency: "Weekly", status: "assigned" }
    ];

    function formatMoney(x) {
      return "$" + x.toFixed(2);
    }

    function renderBalance() {
      document.getElementById("kid-balance").textContent = formatMoney(kid.balance);
    }

    function renderChores() {
      const list = document.getElementById("chore-list");
      list.innerHTML = "";

      chores.forEach(chore => {
        const isDone = chore.status !== "assigned";

        const li = document.createElement("li");
        li.className = "chore-item";

        li.innerHTML = `
          <div class="chore-main">
            <span class="chore-name">${chore.name}</span>
            <span class="chore-meta">${chore.frequency} â€¢ Earn ${formatMoney(chore.payout)}</span>
          </div>
          <div class="chore-right">
            <span class="tag">${isDone ? "Sent to parent" : "To do"}</span>
            <button class="btn btn-done" data-id="${chore.id}" ${isDone ? "disabled" : ""}>
              ${isDone ? "Done âœ”" : "ğŸ‰ I finished!"}
            </button>
          </div>
        `;

        list.appendChild(li);
      });

      list.querySelectorAll("button[data-id]").forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.getAttribute("data-id");
          markDone(id);
        });
      });
    }

    function markDone(id) {
      const chore = chores.find(c => c.id === id);
      if (!chore || chore.status !== "assigned") return;

      // In a real app: this would send to parent for approval
      chore.status = "pending";

      // Tiny instant â€œfeel goodâ€ bump
      kid.balance += 0.5;
      renderBalance();
      renderChores();

      const note = document.getElementById("balance-note");
      if (note) {
        note.textContent = "Nice! Your parent will see this and can approve it for full payout.";
      }
    }

    // Init
    renderBalance();
    renderChores();
  </script>
</body>
</html>