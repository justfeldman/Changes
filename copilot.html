<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WIP Copilot Notepad</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #020617;
      color: #e5e7eb;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid #1f2937;
      background: #020617;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    .brand {
      font-size: 14px;
      font-weight: 600;
    }
    .brand span {
      color: #60a5fa;
    }
    .topbar-buttons {
      display: flex;
      gap: 8px;
    }
    button {
      padding: 6px 10px;
      border-radius: 999px;
      border: none;
      background: #2563eb;
      color: #f9fafb;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
    }
    button:hover {
      filter: brightness(1.05);
    }
    .btn-secondary {
      background: #0f172a;
      border: 1px solid #4b5563;
    }

    .main {
      padding: 14px 16px 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .columns {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    @media (max-width: 800px) {
      .columns { grid-template-columns: 1fr; }
    }

    .panel {
      background: #020617;
      border: 1px solid #1f2937;
      border-radius: 10px;
      padding: 10px;
    }
    .panel-title {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 6px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }
    textarea {
      width: 100%;
      min-height: 180px;
      border-radius: 8px;
      border: 1px solid #1f2937;
      background: #020617;
      color: #e5e7eb;
      font-size: 13px;
      padding: 8px;
      resize: vertical;
    }
    textarea::placeholder {
      color: #6b7280;
    }

    .thinking-box {
      font-size: 12px;
      color: #d1d5db;
      white-space: pre-wrap;
      min-height: 80px;
    }

    .code-box {
      background: #020617;
      border-radius: 8px;
      border: 1px solid #1f2937;
      padding: 8px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      color: #a5b4fc;
      white-space: pre-wrap;
      min-height: 140px;
      overflow-y: auto;
    }

    .actions-row {
      display: flex;
      justify-content: flex-start;
      gap: 8px;
      margin-top: 6px;
    }
  </style>
</head>
<body>

<div class="topbar">
  <div class="brand">WIP <span>Copilot</span> · Meeting Pad</div>
  <div class="topbar-buttons">
    <button class="btn-secondary" onclick="openSqlKey()">SQL Key Page</button>
  </div>
</div>

<div class="main">
  <div class="panel">
    <div class="panel-title">Input · Notes for Copilot</div>
    <textarea id="inputNotes" placeholder="Write down her ideas here during the meeting. 
Example:
- Build a simple WIP dashboard
- Needs a front-end for staff
- Export should be Excel + SQL-ready
- Connect to APS later, not now"></textarea>
    <div class="actions-row">
      <button onclick="runCopilot()">Run Copilot on these notes</button>
    </div>
  </div>

  <div class="columns">
    <div class="panel">
      <div class="panel-title">Copilot Thinking · Plan</div>
      <div id="thinkingOutput" class="thinking-box">
        Copilot-style breakdown of the problem will show up here.
      </div>
    </div>

    <div class="panel">
      <div class="panel-title">Copilot Draft · Code</div>
      <div id="codeOutput" class="code-box">// Code sketch will type out here…</div>
      <div class="actions-row">
        <button class="btn-secondary" onclick="copyCode()">Copy code</button>
      </div>
    </div>
  </div>
</div>

<script>
  // Opens your existing SQL key page in a new tab
  function openSqlKey() {
    window.open("https://justfeldman.github.io/Changes/index2.html", "_blank");
  }

  let typingTimer = null;

  function runCopilot() {
    const notes = document.getElementById("inputNotes").value.trim();
    const thinkingEl = document.getElementById("thinkingOutput");
    const codeEl = document.getElementById("codeOutput");

    if (!notes) {
      alert("Type some notes first – what is she asking for?");
      return;
    }

    // Build a simple "thinking" view: bullet points from each line
    const lines = notes.split("\n")
      .map(l => l.trim())
      .filter(l => l.length > 0);

    let thinking = "Understanding the request:\n\n";
    lines.forEach((line, idx) => {
      thinking += `• Point ${idx + 1}: ${line}\n`;
    });
    thinking += `\nNext steps:\n`;
    thinking += `1) Translate these into a small UI or script.\n`;
    thinking += `2) Iterate live in the meeting as she talks.\n`;

    thinkingEl.textContent = thinking;

    // Build a simple code draft (front-end oriented)
    const commentLines = lines.map(l => `// - ${l}`).join("\n");
    const codeDraft =
`// Sketch based on meeting notes:
// (Use this as a starting point to refine live.)

${commentLines}

function buildPrototype() {
  // TODO: wire this to your real backend or SQL later
  const requirements = [
${lines.map(l => `    "${l.replace(/"/g, '\\"')}"`).join(",\n")}
  ];

  console.log("Starting from these requirements:", requirements);
  // 1) Draw a simple UI (HTML or SwiftUI)
  // 2) Add 1–2 key interactions
  // 3) Only then think about APS / SQL integration
}

// Call this in your real environment to start iterating:
buildPrototype();`;

    // Clear any existing typing animation
    if (typingTimer) clearInterval(typingTimer);

    codeEl.textContent = ""; // reset

    // Type out the code like Copilot writing
    let idx = 0;
    typingTimer = setInterval(() => {
      if (idx >= codeDraft.length) {
        clearInterval(typingTimer);
        typingTimer = null;
        return;
      }
      codeEl.textContent += codeDraft[idx];
      idx++;
      codeEl.scrollTop = codeEl.scrollHeight;
    }, 8); // lower = faster typing
  }

  function copyCode() {
    const code = document.getElementById("codeOutput").textContent;
    if (!code.trim()) {
      alert("There is no code to copy yet.");
      return;
    }
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(code)
        .then(() => alert("Code copied to clipboard."))
        .catch(() => alert("Could not access clipboard – copy manually."));
    } else {
      alert("Clipboard API not available – copy manually.");
    }
  }
</script>

</body>
</html>
